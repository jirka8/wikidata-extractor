# WikiData Extraktor - Konfigurace pro základní informace o sídlech ve Spojeném království
#
# UPOZORNĚNÍ: Extrakce dat pro celé Spojené království je velmi náročná kvůli velkému objemu dat.
# I s omezeními (pouze cities/towns/boroughs) se mohou objevovat Gateway Timeout chyby.
#
# DOPORUČENÍ: Pro lepší výsledky použijte specifickou konfiguraci pro jednotlivé země:
#   - england.yaml pro Anglii (nejkompletnější data s hierarchií)
#   - Případně vytvořte vlastní konfigurace pro Scotland, Wales, Northern Ireland
#
# Tato konfigurace je "lightweight" verze pro rychlé testování nebo základní přehled.

country:
  name: "United Kingdom"
  wikidata_qid: "Q145"
  iso_code: "GB"
  language: "en"

# Hierarchie pro Spojené království
# POZOR: Administrativní hierarchie je zakomentována kvůli Gateway Timeout problémům
# Tranzitivní property paths (wdt:P131*) jsou příliš pomalé pro velké země
# administrative_hierarchy:
#   - level: 1
#     name: "Constituent Country"
#     wikidata_property: "P131"
#     wikidata_instance_of: "Q3336843"
#   - level: 2
#     name: "County / Region"
#     wikidata_property: "P131"
#     wikidata_instance_of:
#       - "Q23397"   # ceremonial county of England
#       - "Q189556"  # council area of Scotland
#       - "Q25219"   # principal area of Wales

# Stahovat města a menší města (bez vesnic a osad - těch jsou desítky tisíc)
settlement_types:
  - type: "city"
    wikidata_qid: "Q515"
    label: "City"
  - type: "town"
    wikidata_qid: "Q3957"
    label: "Town"
  - type: "borough"
    wikidata_qid: "Q5195043"
    label: "Borough"
  # Následující typy jsou zakomentovány kvůli příliš velkému objemu dat
  # - type: "village"
  #   wikidata_qid: "Q532"
  #   label: "Village"
  # - type: "hamlet"
  #   wikidata_qid: "Q5084"
  #   label: "Hamlet"
  # - type: "civil_parish"
  #   wikidata_qid: "Q1115575"
  #   label: "Civil Parish"

data_fields:
  # Základní identifikátory
  - field_name: "wikidata_id"
    wikidata_property: "SUBJECT"
    required: true
    output_column: "wikidata_id"
    description: "WikiData QID of the settlement"

  - field_name: "name_local"
    wikidata_property: "rdfs:label"
    language_filter: "en"
    required: true
    output_column: "name_en"
    description: "Name in English"

  - field_name: "coordinates"
    wikidata_property: "P625"
    required: false
    output_column: ["latitude", "longitude"]
    description: "GPS coordinates"

  - field_name: "population"
    wikidata_property: "P1082"
    required: false
    output_column: "population"
    data_type: "integer"
    description: "Population count"

  - field_name: "iso_code"
    wikidata_property: "P300"
    required: false
    output_column: "iso_3166_2_code"
    description: "ISO 3166-2 code"

  - field_name: "toid"
    wikidata_property: "P3120"
    required: false
    output_column: "os_toid"
    description: "Ordnance Survey TOID"

# Filtr, který omezí výsledky pouze na typy uvedené v settlement_types
filters:
  settlement_types_include:
    - "Q515"      # city
    - "Q3957"     # town
    - "Q5195043"  # borough
    # Villages, hamlets a civil parishes jsou zakomentovány kvůli velkému objemu
    # - "Q532"      # village
    # - "Q5084"     # hamlet
    # - "Q1115575"  # civil parish
  exclude_historical: true

output:
  file_path: "output/united_kingdom_settlements.csv"
  encoding: "utf-8-sig"
  delimiter: ","
  include_header: true
  null_value: ""

query_settings:
  endpoint: "https://query.wikidata.org/sparql"
  timeout: 600 # Zvýšený timeout pro větší zemi
  user_agent: "WikiDataExtractor/1.0 (https://github.com/jirka8/wikidata-extractor)"
  rate_limit_delay: 1.0
  retry_attempts: 3
  # Strategie: single_query - jeden dotaz na celé UK
  # S omezenými settlement_types (cities/towns/boroughs) by to mělo fungovat
  # strategy: "by_admin_level"
  # batch_by_admin_level: 1
